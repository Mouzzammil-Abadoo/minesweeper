!function(){"use strict";angular.module("Minesweeper",["ngMaterial","ngMessages","ngAnimate","ui.router"])}(),function(){function config($stateProvider){$stateProvider.state("home",{url:"",templateUrl:"tpl/minesweeper.tpl.html",controller:"MinesweeperController",controllerAs:"vm"})}config.$inject=["$stateProvider"],angular.module("Minesweeper").config(config)}(),function(){"use strict";angular.module("Minesweeper")}(),function(){function run(){}angular.module("Minesweeper").run(run)}(),function(){function MinesweeperController($scope){function init(){vm.coordinates=[],vm.isWinMessageVisible=!1,vm.hasLostMessageVisible=!1,localStorage.gridLength=vm.gridLength,localStorage.minesNum=vm.minesNum,vm.minefield={rows:[]};for(var i=0;i<vm.gridLength;i++){for(var row={spots:[]},j=0;j<vm.gridLength;j++){var spot={};spot.isCovered=!0,row.spots.push(spot);var pos={row:i,column:j};vm.coordinates.push(pos)}vm.minefield.rows.push(row)}vm.coordinates=_.shuffle(vm.coordinates),setMines(),setNumbers()}function getSpot(row,column){return vm.minefield.rows[row].spots[column]}function setMines(){for(var y=0;y<vm.minesNum;y++)if(vm.coordinates[y]){var spot=getSpot(vm.coordinates[y].row,vm.coordinates[y].column);"mine"!=spot.content&&(spot.content="mine")}}function setNumbers(){for(var y=0;y<vm.gridLength;y++)for(var x=0;x<vm.gridLength;x++)setSpotNum(x,y)}function setSpotNum(row,column){var thisSpot=getSpot(row,column);"mine"!=thisSpot.content&&(checkNeighbour(thisSpot,row-1,column-1),checkNeighbour(thisSpot,row-1,column),checkNeighbour(thisSpot,row-1,column+1),checkNeighbour(thisSpot,row,column-1),checkNeighbour(thisSpot,row,column+1),checkNeighbour(thisSpot,row+1,column-1),checkNeighbour(thisSpot,row+1,column),checkNeighbour(thisSpot,row+1,column+1))}function checkNeighbour(thisSpot,row,column){vm.minefield.rows[row]&&vm.minefield.rows[row].spots[column]&&"mine"==vm.minefield.rows[row].spots[column].content&&(thisSpot.content?thisSpot.content++:thisSpot.content=1)}function uncoverSpot(spot,x,y){spot.isCovered=!1,"mine"==spot.content?(vm.hasLostMessageVisible=!0,uncoverAllSpots()):(spot.content||revealAllBlanks(x,y),hasWon()&&(vm.isWinMessageVisible=!0,uncoverAllSpots()))}function hasWon(){for(var y=0;y<vm.gridLength;y++)for(var x=0;x<vm.gridLength;x++){var spot=getSpot(y,x);if(spot.isCovered&&"mine"!=spot.content)return!1}return!0}function uncoverAllSpots(){for(var y=0;y<vm.gridLength;y++)for(var x=0;x<vm.gridLength;x++)vm.minefield.rows[x].spots[y].isCovered=!1}function revealAllBlanks(row,column){revealBlank(row-1,column-1),revealBlank(row-1,column),revealBlank(row-1,column+1),revealBlank(row,column-1),revealBlank(row,column+1),revealBlank(row+1,column-1),revealBlank(row+1,column),revealBlank(row+1,column+1)}function revealBlank(row,column){vm.minefield.rows[row]&&vm.minefield.rows[row].spots[column]&&(!vm.minefield.rows[row].spots[column].isCovered||vm.minefield.rows[row].spots[column].content&&!nums.includes(vm.minefield.rows[row].spots[column].content)||(vm.minefield.rows[row].spots[column].isCovered=!1,vm.minefield.rows[row].spots[column].content||revealAllBlanks(row,column)))}var vm=this;vm.gridLength=parseInt(localStorage.gridLength)||10,vm.minesNum=parseInt(localStorage.minesNum)||10,vm.uncoverSpot=uncoverSpot,vm.reset=init,init();var nums=[1,2,3,4,5,6,7,8]}MinesweeperController.$inject=["$scope"],angular.module("Minesweeper").controller("MinesweeperController",MinesweeperController)}();